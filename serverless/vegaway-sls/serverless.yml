org: ${env:SLS_ORG} # Define SLS_ORG in .env
service: vegaway-sls

provider:
  name: aws
  runtime: nodejs20.x
  region: eu-north-1
  iam:
    role: ${env:MY_ROLE_ARN} # Define MY_ROLE_ARN in .env

functions:
  # CUSTOMER ACTIONS

  getMenu:
    handler: handlers/getMenu.handler
    events:
      - httpApi:
          path: /menu
          method: get

  createOrder:
    handler: handlers/createOrder.handler
    events:
      - httpApi:
          path: /orders
          method: post

  getOrderStatus:
    handler: handlers/getOrderStatus.handler
    events:
      - httpApi:
          path: /orders/status
          method: get

  deleteOrder:
    handler: handlers/deleteOrder.handler
    events:
      - httpApi:
          path: /orders
          method: delete

  updateOrder:
    handler: handlers/updateOrder.handler
    events:
      - httpApi:
          path: /orders
          method: put

  # STAFF ACTIONS

  listActiveOrders:
    handler: handlers/listActiveOrders.handler
    events:
      - httpApi:
          path: /staff/orders/active
          method: get

  listPendingOrders:
    handler: handlers/listPendingOrders.handler
    events:
      - httpApi:
          path: /staff/orders/pending
          method: get

  updatePendingOrder:
    handler: handlers/updatePendingOrder.handler
    events:
      - httpApi:
          path: /staff/orders/pending
          method: put

  confirmPendingOrder:
    handler: handlers/confirmPendingOrder.handler
    events:
      - httpApi:
          path: /staff/orders/confirm
          method: post

  getInventory:
    handler: handlers/getInventory.handler
    events:
      - httpApi:
          path: /staff/inventory
          method: get

  getStaffMenu:
    handler: handlers/getStaffMenu.handler
    events:
      - httpApi:
          path: /staff/menu
          method: get

  updateMenuItem:
    handler: handlers/updateMenuItem.handler
    events:
      - httpApi:
          path: /staff/menu/items
          method: put
